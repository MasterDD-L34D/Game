# task registry derivato da `INTEGRATION_PLAN.md`

meta:
  version: 1
  last_update: 2025-10-29
  notes: 'Aggiornare status e assegnatari quando i task vengono presi in carico. Directory di destinazione già disponibili: docs/evo-tactics, docs/security, data/external/evo, reports/evo, docs/incoming/archive/documents, tools/automation, docs/wireframes/evo. Utilizzare tools/automation/evo_batch_runner.py per automatizzare i comandi batch (dry-run di default).'

tasks:
  - id: DOC-01
    batch: documentation
    title: Conversione sorgenti Evo-Tactics
    description: 'Convertire file DOCX/PDF in Markdown con frontmatter conforme.'
    status: done
    owner: docs-team
    depends_on: []
    deliverables:
      - docs/evo-tactics/*.md
    commands:
      - pandoc <input.docx> -o docs/evo-tactics/<slug>.md --metadata title="<Titolo>"
    notes: 'Cinque sorgenti convertite con anchor evo-* e metadata aggiornati.'

  - id: DOC-02
    batch: documentation
    title: Aggiornare indice documentazione
    description: 'Integrare le nuove guide nel README principale e nel wiki.'
    status: done
    owner: docs-team
    depends_on:
      - DOC-01
    deliverables:
      - docs/README.md
    commands:
      - npm run docs:lint
    notes: 'Indice arricchito con sezione Evo-Tactics e link ancorati; QA `reports/evo/qa/docs.log` conferma `npm run docs:lint` eseguito con esito positivo e follow-up chiuso.'
    evidence:
      - reports/evo/qa/docs.log

  - id: DOC-03
    batch: documentation
    title: Archiviazione duplicati documentazione
    description: 'Spostare copie sorgenti in incoming/archive e aggiornare inventario.'
    status: done
    owner: docs-team
    depends_on:
      - DOC-01
    deliverables:
      - docs/incoming/archive/documents/
      - incoming/lavoro_da_classificare/inventario.yml
    notes: 'Originali DOCX spostati in archive con inventario aggiornato.'

  - id: DAT-01
    batch: data-models
    title: Lint schemi Evo
    description: 'Eseguire lint sugli schema JSON e introdurre namespace evo.'
    status: done
    owner: null
    depends_on: []
    deliverables:
      - schemas/evo/*.schema.json
    commands:
      - npm run schema:lint
    notes: 'Stub jsonschema aggiornato e lint eseguito con PYTHONPATH=. npm run schema:lint -- --pattern schemas/evo/*.schema.json (log in reports/evo/qa/schema.log).'

  - id: DAT-02
    batch: data-models
    title: Revisione enum con gameplay
    description: 'Validare nuovi enum con il team gameplay e registrare feedback.'
    status: done
    owner: gameplay-team
    depends_on:
      - DAT-01
    deliverables:
      - docs/meeting-notes/evo-enum-review.md
    blockers: []
    notes: 'Diff generato con tools/schema_enum_diff.py e verbalizzato in docs/meeting-notes/evo-enum-review.md.'

  - id: DAT-03
    batch: data-models
    title: Merge alias specie
    description: 'Inserire alias confermati in data/core/species/aliases.json.'
    status: done
    owner: null
    depends_on:
      - DAT-02
    deliverables:
      - data/core/species/aliases.json
    commands:
      - jq '. + input' data/species_aliases.json \
        incoming/lavoro_da_classificare/data/aliases/species_aliases.json
    notes: 'Alias consolidati con jq e validati tramite pytest tests/test_species_aliases.py.'

  - id: SPEC-01
    batch: species_ecotypes
    title: Validazione JSON specie/ecotipi
    description: 'Validare file specie ed ecotipi con lo script aggiornato.'
    status: done
    owner: null
    depends_on:
      - DAT-01
    deliverables:
      - reports/incoming/species_validation.log
    commands:
      - ./incoming/scripts/validate_evo_pack.sh --dataset evo-species --schema schemas/evo/species.schema.json
    notes: 'Log SPEC-01 aggiornato; QA `reports/evo/qa/dataset.log` rigenerato con `make evo-validate` (AJV=tools/ajv-wrapper.sh) su 5 trait; directory species attualmente vuota.'

  - id: SPEC-02
    batch: species_ecotypes
    title: Generazione report sommario specie
    description: 'Creare report riepilogativo con species_summary_script.py.'
    status: done
    owner: null
    depends_on:
      - SPEC-01
    deliverables:
      - reports/evo/species_summary.md
    commands:
      - python incoming/scripts/species_summary_script.py --root data/external/evo/species/ --output reports/evo/species_summary.csv
    notes: 'Report Markdown con conteggi specie/ecotipi e dettaglio biome; confronto con baseline `reports/evo/species_summary.md` senza differenze.'

  - id: SPEC-03
    batch: species_ecotypes
    title: Mappatura ecotipi
    description: 'Collegare gli ecotipi Evo agli ecosistemi esistenti.'
    status: done
    owner: null
    depends_on:
      - SPEC-01
    deliverables:
      - data/external/evo/species_ecotype_map.json
    notes: 'Mapping SPEC-03 con note mismatch in inventario (classi aquatiche/sotterranee senza ecosistemi).'

  - id: TRT-01
    batch: traits
    title: Audit duplicati trait
    description: 'Eseguire trait_review.py e classificare le anomalie.'
    status: done
    owner: null
    depends_on:
      - DAT-01
    deliverables:
      - reports/evo/traits_anomalies.csv
    commands:
      - python incoming/scripts/trait_review.py
    notes: 'Script esteso con modalità `--input/--baseline/--out`; CSV rigenerato e righe segnate come `action=add`, invariato rispetto a `reports/evo/traits_anomalies.csv`.'

  - id: TRT-02
    batch: traits
    title: Merge glossario trait
    description: 'Integrare nuovi trait nel glossario mantenendo gli ID univoci.'
    status: done
    owner: null
    depends_on:
      - TRT-01
    deliverables:
      - data/core/traits/glossary.json
    notes: 'Inseriti 50 slug snake_case con label/descrizioni EN/IT e aggiornato timestamp `updated_at`.'

  - id: TRT-03
    batch: traits
    title: Aggiornare analisi merge trait
    description: 'Riassumere esiti revisione nel documento di analisi.'
    status: done
    owner: null
    depends_on:
      - TRT-02
    deliverables:
      - docs/analysis/trait_merge_proposals.md
    notes: 'Redatto report sintetico con elenco slug e assenza duplicati.'

  - id: TOL-01
    batch: tooling
    title: Uniformare script
    description: 'Allineare header, permessi e licenze degli script importati.'
    status: done
    owner: devops
    depends_on: []
    deliverables:
      - incoming/scripts/*.py
      - incoming/scripts/*.sh
    notes: 'Script stabilizzati in incoming/scripts con path corretti e permessi eseguibili; directory lavoro ripulita.'

  - id: TOL-02
    batch: tooling
    title: Target Makefile per Evo
    description: 'Aggiungere target make per validazione e backlog.'
    status: done
    owner: null
    depends_on:
      - TOL-01
    deliverables:
      - Makefile
    notes: 'Aggiunti target evo-validate, evo-backlog e traits-review con propagazione variabili.'

  - id: TOL-03
    batch: tooling
    title: Documentare tooling Evo
    description: "Scrivere guida all'uso degli script Evo."
    status: done
    owner: null
    depends_on:
      - TOL-01
    deliverables:
      - docs/tooling/evo.md
    notes: 'Guida aggiornata con sezioni su validate.sh, setup_backlog.py e trait_review.py, inclusi esempi make.'

  - id: OPS-01
    batch: ops_ci
    title: Gap analysis workflow CI
    description: 'Confrontare workflow importati con pipeline esistenti.'
    status: done
    owner: qa
    depends_on:
      - TOL-01
    deliverables:
      - docs/ops/workflow_diff.md
    notes: 'Tabella aggiornata con differenze gh-pages/Lighthouse e segnalazione workflow security mancante.'

  - id: OPS-02
    batch: ops_ci
    title: Site audit integration
    description: 'Integrare script site-audit e aggiornare README.'
    status: done
    owner: qa
    depends_on:
      - OPS-01
    deliverables:
      - ops/site-audit/
    commands:
      - bash ops/site-audit/run.sh --verbose
    notes: 'Aggiunto bootstrap run.sh con virtualenv, dipendenza requests e README aggiornato; suite verificata localmente. Secret `SITE_BASE_URL` ora configurato (provisioning 2025-11-11, QA reports/evo/qa/update-tracker.log).'

  - id: OPS-03
    batch: ops_ci
    title: Configurazione Lighthouse Evo
    description: 'Aggiornare configurazione lighthouse e test correlati.'
    status: done
    owner: qa
    depends_on:
      - OPS-02
    deliverables:
      - config/lighthouse/evo.lighthouserc.json
    commands:
      - npm run lint:lighthouse
    notes: 'Configurazione migrata in config/lighthouse/evo.lighthouserc.json e script npm aggiornato. Secret `SITE_BASE_URL` validato in CI (provisioning 2025-11-11, QA reports/evo/qa/update-tracker.log).'

  - id: FRN-01
    batch: frontend
    title: Porting test Playwright
    description: 'Adattare gli test E2E al setup vitest/playwright del repo.'
    status: done
    owner: frontend
    depends_on:
      - OPS-01
    deliverables:
      - tests/playwright/evo/
    commands:
      - npm run test:e2e -- --project=evo
    notes: 'Suite Playwright spostata da webapp/tests/playwright/evo; QA `reports/evo/qa/frontend.log` conferma run completo con esito positivo (`npx playwright install --with-deps chromium`) e follow-up chiuso.'
    evidence:
      - reports/evo/qa/frontend.log

  - id: FRN-02
    batch: frontend
    title: Aggiornare sitemap
    description: 'Integrare sitemap e robots aggiornati e verificarli.'
    status: done
    owner: frontend
    depends_on:
      - FRN-01
    deliverables:
      - public/sitemap.xml
      - public/robots.txt
      - reports/evo/sitemap_validation.csv
    commands:
      - python tools/sitemap_link_checker.py public/sitemap.xml > reports/evo/sitemap_validation.csv
    notes: 'Sitemap consolidata da proposed_sitemap.xml, robots copiato in public/ e output validazione registrato in reports/evo/sitemap_validation.csv.'

  - id: FRN-03
    batch: frontend
    title: Documentare mockup Evo
    description: 'Pubblicare mockup nella documentazione wireframe.'
    status: done
    owner: frontend
    depends_on:
      - FRN-01
    deliverables:
      - docs/wireframes/evo/
    notes: 'Mockup spostato in docs/wireframes/evo/mockup_evo_tactics.png con pagina dedicata mockup_evo_tactics.md.'

  - id: ROL-01
    batch: rollout
    title: Retrofit frontmatter archivio Evo
    description: 'Allineare i documenti legacy con i metadati introdotti nelle copie consolidate.'
    status: done
    owner: documentation
    depends_on:
      - DOC-01
    deliverables:
      - docs/incoming/archive/2025-12-19_inventory_cleanup/**/*.md
      - reports/evo/rollout/documentation_gap.md
    commands:
      - python scripts/evo_tactics_metadata_diff.py --mode=backfill --target docs/incoming/archive/2025-12-19_inventory_cleanup/
    notes: 'Replica i frontmatter YAML (title, description, tags, updated) sui documenti legacy per ripristinare indicizzazione e deep-link.'

  - id: ROL-02
    batch: rollout
    title: Reindirizzamenti ancore Evo
    description: 'Pubblicare mapping anchor→URL per i wiki legacy e aggiornare i consumer interni.'
    status: done
    owner: devrel
    depends_on:
      - ROL-01
    deliverables:
      - docs/evo-tactics/anchors-map.csv
      - reports/evo/rollout/documentation_diff.json
    commands:
      - python scripts/evo_tactics_metadata_diff.py --mode=anchors --output docs/evo-tactics/anchors-map.csv
    notes: 'Genera dump ancore consolidate e notifica team Notion/Confluence per aggiornare i link profondi.'

  - id: ROL-03
    batch: rollout
    title: Snapshot playbook Evo mancanti
    description: 'Produrre versioni archivio per i playbook senza controparte legacy.'
    status: done
    owner: security-pmo
    depends_on:
      - ROL-01
    deliverables:
      - docs/incoming/archive/2025-12-19_inventory_cleanup/playbook_security_ops.md
      - docs/incoming/archive/2025-12-19_inventory_cleanup/playbook_template_ptpf.md
      - docs/incoming/archive/2025-12-19_inventory_cleanup/playbook_visione_struttura.md
    notes: 'Estrarre le copie consolidate dei playbook security/PMO e versionarle nell’archivio storico con changelog.'

    telemetry:
      last_sync: 2025-12-19T00:00:00+00:00
      progress: 100
      metric:
        label: Playbook da archiviare
        open_items: 0
        total_items: 218
      samples:
        - docs/incoming/archive/2025-12-19_inventory_cleanup/playbook_security_ops.md
        - docs/incoming/archive/2025-12-19_inventory_cleanup/playbook_template_ptpf.md
        - docs/incoming/archive/2025-12-19_inventory_cleanup/playbook_visione_struttura.md

  - id: ROL-04
    batch: rollout
    title: Allineamento indice trait Evo
    description: 'Mappare i trait `missing_in_index` con gli ID legacy e aggiornare il glossario.'
    status: done
    owner: gameplay-data
    depends_on:
      - TRT-02
    deliverables:
      - data/core/traits/glossary.json
      - reports/evo/rollout/traits_gap.csv
    commands:
      - python tools/traits/sync_missing_index.py --source reports/evo/rollout/traits_gap.csv --dest data/core/traits/glossary.json
    notes: 'Garantisce corrispondenza tra slug Evo e catalogo legacy per trait in stato `missing_in_index`. Sincronizzazione 2025-11-27 con slug deduplicati nel glossario.'

    telemetry:
      last_sync: 2025-11-27T13:30:28+00:00
      progress: 100
      metric:
        label: Trait missing_in_index
        open_items: 0
        total_items: 225
      samples: []

  - id: ROL-05
    batch: rollout
    title: Esportazione dataset trait consumer esterni
    description: 'Preparare il pacchetto CSV/JSON per i consumer esterni che non ricevono i nuovi trait.'
    status: done
    owner: partner-success
    depends_on:
      - ROL-04
    deliverables:
      - reports/evo/rollout/traits_external_sync.csv
      - reports/evo/rollout/traits_gap.csv
    notes: |
      Deriva dall’analisi `missing_in_external` e fornisce export normalizzato per partner tooling.
      - Export rigenerato dopo la chiusura di ROL-04: CSV UTF-8 con intestazione `slug,label_it,label_en,tier,external_code,status` (RFC4180, separatore `,`, newline LF) e 204 righe totali.
        - `traits_gap.csv` aggiornato sui `missing_in_external` residui (202 occorrenze) con segnalazione dei soli `missing_in_index` rimasti (2 slug).
      - Output locale condiviso con il team partner-success (nessun upload S3 richiesto) per la validazione finale.

    telemetry:
      last_sync: 2025-11-27T13:38:24+00:00
      progress: 100
      metric:
        label: Trait missing_in_external
        open_items: 202
        total_items: 253
      samples:
        - ali_fulminee
        - ali_ioniche
        - ali_membrana_sonica
        - antenne_dustsense
        - antenne_eco_turbina

  - id: ROL-06
    batch: rollout
    title: Smoke 03B inventario
    description: 'Rieseguire schema-only, trait audit e trait style in modalità report-only per il batch 03B.'
    status: done
    owner: qa
    depends_on:
      - OPS-03
    deliverables:
      - reports/temp/patch-03B-incoming-cleanup/2026-02-20/
      - incoming/lavoro_da_classificare/inventario.yml
    commands:
      - bash incoming/scripts/validate.sh --smoke-only
    notes: '14 controlli schema con 3 warning, trait audit senza regressioni, 230 suggerimenti style (0 errori); inventario aggiornato a stato validato.'

  - id: ROL-07
    batch: rollout
    title: Sync project board backlog
    description: 'Popolare la roadmap con setup_backlog.py usando backlog_tasks_example.yaml.'
    status: in-progress
    owner: dev-tooling
    depends_on:
      - TOL-02
    deliverables:
      - incoming/lavoro_da_classificare/backlog_tasks_example.yaml
    commands:
      - python incoming/scripts/setup_backlog.py
    notes: |
      Template backlog convertito nel formato atteso dallo script (project_name, columns, issues).
      Script rafforzato con preflight che verifica accesso al repository e alle Projects prima di creare board e issue.
      Run richiede ancora un GITHUB_TOKEN valido (scope repo+project) per finalizzare la popolazione sul repository target.

  - id: ROL-08
    batch: rollout
    title: Piano rollout specie/ecotipi
    description: 'Sequenziare le milestone di attivazione specie e aggiornare i consumer telemetria.'
    status: done
    owner: gameplay-ops
    depends_on:
      - SPEC-03
    deliverables:
      - reports/evo/rollout/species_ecosystem_gap.md
      - apps/backend/services/nebulaTelemetryAggregator.js
      - apps/backend/controllers/atlasController.js
    notes: 'Integra fallback slot legacy, arricchisce payload timeline con sentience_index e allinea mock telemetry.'

    qa:
      smoke_test: 'Verifica /nebula/atlas e /nebula/atlas/telemetry con timeline arricchita (sentience_index) e fallback slot da matrice rollout.'

    telemetry:
      last_sync: 2025-11-27T13:18:57+00:00
      progress: 100
      metric:
        label: Ecotipi con mismatch
        open_items: 0
        total_items: 20
      samples:
        - specie_ecosystem_matrix.csv
        - fallback slot legacy (terraforming_max_slots)
        - sentience_index in timeline telemetry
