<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="data-owner" content="MasterDD-L34D" />
    <meta name="data-repo" content="Game" />
    <meta
      name="pack-root"
      content="https://raw.githubusercontent.com/MasterDD-L34D/Game/main/packs/evo_tactics_pack/"
    />
    <meta name="data-branch" content="main" />
    <title>Ecosystem Pack Â· Generatore</title>
    <link rel="stylesheet" href="../site.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js" defer></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
      integrity="sha512-vDKWohF82vNKiIvlCg9rvEKq7h1csVI9adV/V+Ld0nbwG6Foj5dPWEkUBDYDbK6R4HZoQLm3LFOLkU8V5DIhWg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
      defer
    ></script>
    <script type="module" src="generator.js" defer></script>
  </head>
  <body>
    <header class="section">
      <div class="section__header">
        <p class="section__kicker">Ecosystem Pack</p>
        <h1>Generatore di ecosistemi</h1>
        <p>
          Scegli il numero di biomi, applica filtri su flag, ruoli e tag funzionali, quindi
          genera un set coerente di specie con seed d'incontro calcolati automaticamente.
        </p>
      </div>
      <nav class="chip-list" aria-label="Navigazione secondaria">
        <a class="chip" href="index.html">Panoramica</a>
        <a class="chip chip--active" aria-current="page" href="generator.html">Generatore</a>
        <a class="chip" href="catalog.html">Catalogo</a>
        <a class="chip" href="reports/index.html">Report &amp; analisi</a>
      </nav>
    </header>

    <main class="layout layout--codex" data-anchor-root>
      <nav class="layout__rail" data-anchor="summary" aria-label="Sommario della pagina">
        <div class="anchor-nav">
          <div class="anchor-nav__header">
            <p class="anchor-nav__title">Sommario</p>
            <button
              type="button"
              class="button button--ghost anchor-nav__toggle"
              data-codex-toggle
            >
              âŒ˜ Codex mode
            </button>
          </div>
          <ol class="anchor-nav__list" data-anchor-list>
            <li class="anchor-nav__item">
              <a
                class="anchor-nav__link"
                href="#generator-parameters"
                data-anchor-target="parameters"
              >
                Parametri
              </a>
            </li>
            <li class="anchor-nav__item">
              <a
                class="anchor-nav__link"
                href="#generator-traits"
                data-anchor-target="traits"
              >
                Pacchetti ambientali
              </a>
            </li>
            <li class="anchor-nav__item">
              <a
                class="anchor-nav__link"
                href="#generator-biomes"
                data-anchor-target="biomes"
              >
                Biomi selezionati
              </a>
            </li>
            <li class="anchor-nav__item">
              <a
                class="anchor-nav__link"
                href="#generator-seeds"
                data-anchor-target="seeds"
              >
                Encounter seed
              </a>
            </li>
          </ol>
        </div>
      </nav>

      <div class="layout__content">
        <section class="section" id="generator-flows" aria-labelledby="generator-flows-title">
          <div class="section__header">
            <h2 id="generator-flows-title">Mappa flussi utente</h2>
            <p>
              Stato in tempo reale dei tre percorsi chiave del generatore: onboarding, riepilogo e
              cronologia.
            </p>
          </div>
          <ol class="generator-flow-map" id="generator-flow-map-list" aria-live="polite"></ol>
        </section>

        <section
          class="section"
          id="generator-parameters"
          data-panel="parameters"
          data-flow-node="onboarding"
        >
          <article class="card card--highlight">
            <form class="form" id="generator-form">
              <h2 class="form__title">Parametri</h2>
              <div class="generator-form__section">
                <h3 class="generator-form__legend">Vincoli principali</h3>
                <div class="generator-form__grid">
                  <label class="form__field">
                    <span>Numero di biomi</span>
                    <input id="nBiomi" type="number" min="1" max="6" value="2" />
                  </label>
                </div>
              </div>
              <div class="generator-form__section">
                <h3 class="generator-form__legend">Filtra ecosistema</h3>
                <div class="generator-form__grid generator-form__grid--filters">
                  <label class="form__field">
                    <span>Flags richiesti</span>
                    <select id="flags" multiple size="5"></select>
                  </label>
                  <label class="form__field">
                    <span>Ruoli trofici</span>
                    <select id="roles" multiple size="5"></select>
                  </label>
                  <label class="form__field">
                    <span>Tag funzionali</span>
                    <select id="tags" multiple size="6"></select>
                  </label>
                </div>
            </div>
              <section
                class="generator-profiles"
                id="generator-profiles"
                aria-labelledby="generator-profiles-title"
              >
                <div class="generator-profiles__header">
                  <h3 class="generator-form__legend" id="generator-profiles-title">
                    Profili filtro
                  </h3>
                  <button
                    type="button"
                    class="button button--ghost generator-profiles__reset"
                    data-action="profile-clear-all"
                  >
                    Svuota profili
                  </button>
                </div>
                <p class="generator-profiles__hint">
                  Salva combinazioni di filtri per richiamarle rapidamente durante i re-roll.
                </p>
                <p class="generator-profiles__empty" id="generator-profile-empty">
                  Nessun profilo salvato. Usa "Salva" su uno slot per crearne uno nuovo.
                </p>
                <ul
                  class="generator-profiles__slots"
                  id="generator-profile-slots"
                  aria-live="polite"
                ></ul>
              </section>
              <div class="form__actions generator-form__actions">
                <button type="button" class="button" data-action="roll-ecos">
                  ðŸŽ² Genera ecosistema
                </button>
                <button type="button" class="button button--secondary" data-action="reroll-biomi">
                  â†» Re-roll biomi
                </button>
                <button type="button" class="button button--secondary" data-action="reroll-species">
                  â†» Re-roll specie
                </button>
                <button type="button" class="button button--ghost" data-action="reroll-seeds">
                  â†» Re-roll encounter seed
                </button>
                <button type="button" class="button button--ghost" data-action="export-json">
                  â¬‡ï¸Ž JSON
                </button>
                <button type="button" class="button button--ghost" data-action="export-yaml">
                  â¬‡ï¸Ž YAML
                </button>
              </div>
            </form>
            <section
              class="generator-export-panel"
              id="generator-export"
              aria-labelledby="generator-export-title"
            >
              <div class="generator-export-panel__header">
                <h3 class="generator-export-panel__title" id="generator-export-title">
                  Manifest export
                </h3>
                <label class="form__field generator-export-panel__preset">
                  <span>Preset</span>
                  <select id="generator-export-preset"></select>
                </label>
              </div>
              <p class="generator-export__meta" id="generator-export-meta">
                Genera un ecosistema per preparare il manifest dei file.
              </p>
              <p class="generator-export__empty" id="generator-export-empty">
                Nessun contenuto disponibile. Genera un ecosistema per sbloccare i preset.
              </p>
              <ul
                class="generator-export__list"
                id="generator-export-list"
                aria-live="polite"
              ></ul>
              <div class="generator-export__actions" id="generator-export-actions">
                <button type="button" class="button button--ghost" data-action="download-preset-zip">
                  â¬‡ï¸Ž Bundle ZIP
                </button>
                <button type="button" class="button button--ghost" data-action="download-dossier-html">
                  â¬‡ï¸Ž Dossier HTML
                </button>
                <button type="button" class="button button--ghost" data-action="download-dossier-pdf">
                  â¬‡ï¸Ž Dossier PDF
                </button>
              </div>
              <div class="generator-export__preview" id="generator-export-preview" hidden>
                <details id="generator-preview-json-details">
                  <summary>Anteprima JSON</summary>
                  <pre id="generator-preview-json"></pre>
                </details>
                <details id="generator-preview-yaml-details">
                  <summary>Anteprima YAML</summary>
                  <pre id="generator-preview-yaml"></pre>
                </details>
                <section class="generator-dossier" aria-labelledby="generator-dossier-title">
                  <header class="generator-dossier__header">
                    <h4 class="generator-dossier__title" id="generator-dossier-title">
                      Anteprima dossier
                    </h4>
                    <p class="generator-dossier__hint" id="generator-dossier-empty">
                      Genera un ecosistema per abilitare il dossier.
                    </p>
                  </header>
                  <div class="generator-dossier__preview" id="generator-dossier-preview"></div>
                </section>
              </div>
              <p class="generator-export__empty" id="generator-preview-empty">
                Genera un ecosistema per visualizzare le anteprime.
              </p>
            </section>
          <section
            class="generator-summary"
            id="generator-summary"
            aria-labelledby="generator-summary-title"
            data-flow-node="summary"
          >
            <h3 class="generator-summary__title" id="generator-summary-title">Riepilogo rapido</h3>
            <dl class="generator-summary__metrics">
              <div class="generator-summary__metric">
                <dt class="generator-summary__label">Biomi</dt>
                <dd class="generator-summary__value" data-summary="biomes">0</dd>
              </div>
              <div class="generator-summary__metric">
                <dt class="generator-summary__label">Specie</dt>
                <dd class="generator-summary__value" data-summary="species">0</dd>
              </div>
              <div class="generator-summary__metric">
                <dt class="generator-summary__label">Seed</dt>
                <dd class="generator-summary__value" data-summary="seeds">0</dd>
              </div>
            </dl>
            <p class="generator-summary__status" id="generator-status" aria-live="polite">
              Carica il catalogo per iniziare.
            </p>
            <p class="generator-summary__note" id="generator-last-action">Ultimo aggiornamento: â€”</p>
            <section
              class="generator-narrative"
              id="generator-narrative"
              aria-labelledby="generator-narrative-title"
              data-has-narrative="false"
            >
              <div class="generator-narrative__header">
                <h4 class="generator-summary__subtitle" id="generator-narrative-title">
                  Narrativa dinamica
                </h4>
                <div class="generator-audio-controls" id="generator-audio-controls">
                  <button
                    type="button"
                    class="button button--ghost generator-audio-controls__mute"
                    id="generator-audio-mute"
                    aria-pressed="false"
                  >
                    ðŸ”ˆ Audio attivo
                  </button>
                  <label class="generator-audio-controls__volume" for="generator-audio-volume">
                    <span class="visually-hidden">Volume effetti sonori</span>
                    <input
                      type="range"
                      id="generator-audio-volume"
                      min="0"
                      max="100"
                      value="75"
                    />
                  </label>
                </div>
              </div>
              <article class="narrative-panel" id="generator-briefing-panel">
                <h5 class="narrative-panel__title">Mission briefing</h5>
                <p class="narrative-panel__body" data-narrative="briefing">
                  Genera un ecosistema per ottenere il briefing operativo.
                </p>
              </article>
              <article class="narrative-panel" id="generator-hook-panel">
                <h5 class="narrative-panel__title">Hook narrativo</h5>
                <p class="narrative-panel__body" data-narrative="hook">
                  Gli hook narrativi compariranno dopo la prima generazione.
                </p>
              </article>
            </section>
            <div class="generator-summary__pins">
              <h4 class="generator-summary__subtitle">Specie pinnate</h4>
              <p class="generator-summary__empty" id="generator-pinned-empty">
                Nessuna specie pinnata. Usa il pulsante ðŸ“Œ sulle card per aggiungerle.
              </p>
              <ul class="generator-pins" id="generator-pinned-list" aria-live="polite"></ul>
            </div>
            <section
              class="generator-history"
              id="generator-history"
              aria-labelledby="generator-history-title"
              data-flow-node="history"
            >
              <div class="generator-history__header">
                <h4 class="generator-summary__subtitle" id="generator-history-title">
                  Cronologia snapshot
                </h4>
                <button
                  type="button"
                  class="button button--ghost generator-history__clear"
                  data-action="history-clear"
                >
                  Svuota cronologia
                </button>
              </div>
              <p class="generator-summary__empty" id="generator-history-empty">
                Nessuna cronologia salvata. Genera o ricalcola un ecosistema per creare snapshot.
              </p>
              <ol class="generator-history__list" id="generator-history-list" aria-live="polite"></ol>
            </section>
            <section
              class="generator-activity"
              id="generator-activity"
              aria-labelledby="generator-activity-title"
            >
              <div class="generator-activity__header">
                <h4 class="generator-summary__subtitle" id="generator-activity-title">
                  Timeline attivitÃ 
                </h4>
                <div class="generator-activity__controls">
                  <label class="form__field generator-activity__search">
                    <span class="visually-hidden">Cerca nella timeline</span>
                    <input
                      type="search"
                      id="activity-search"
                      placeholder="Cerca eventi nella timeline"
                      autocomplete="off"
                    />
                  </label>
                  <fieldset class="generator-activity__tones">
                    <legend class="visually-hidden">Filtra per stato</legend>
                    <label class="chip">
                      <input type="checkbox" value="success" data-activity-tone checked />
                      <span>Successo</span>
                    </label>
                    <label class="chip">
                      <input type="checkbox" value="info" data-activity-tone checked />
                      <span>Info</span>
                    </label>
                    <label class="chip">
                      <input type="checkbox" value="warn" data-activity-tone checked />
                      <span>Avvisi</span>
                    </label>
                    <label class="chip">
                      <input type="checkbox" value="error" data-activity-tone checked />
                      <span>Errori</span>
                    </label>
                  </fieldset>
                  <label class="form__field generator-activity__tags">
                    <span>Tag</span>
                    <select id="activity-tags" multiple size="4"></select>
                  </label>
                  <label class="generator-activity__pinned">
                    <input type="checkbox" id="activity-pinned-only" />
                    <span>Solo eventi pinnati</span>
                  </label>
                  <div class="generator-activity__export">
                    <button
                      type="button"
                      class="button button--ghost"
                      data-action="export-log-json"
                    >
                      â¬‡ï¸Ž Log JSON
                    </button>
                    <button
                      type="button"
                      class="button button--ghost"
                      data-action="export-log-csv"
                    >
                      â¬‡ï¸Ž Log CSV
                    </button>
                  </div>
                  <button
                    type="button"
                    class="button button--ghost generator-activity__reset"
                    data-action="reset-activity-filters"
                  >
                    Azzera filtri
                  </button>
                </div>
              </div>
              <p class="generator-summary__empty" id="generator-log-empty">
                Nessuna attivitÃ  registrata.
              </p>
              <ol class="generator-timeline" id="generator-log" aria-live="polite"></ol>
            </section>
            <section
              class="generator-compare"
              id="generator-compare-panel"
              aria-labelledby="generator-compare-title"
            >
              <div class="generator-compare__header">
                <h4 class="generator-compare__title" id="generator-compare-title">
                  Confronto specie
                </h4>
                <p class="generator-compare__hint">
                  Seleziona fino a tre specie con il pulsante <span aria-hidden="true">ðŸ“Š</span>
                  <span class="visually-hidden">Confronta</span> sulle card per visualizzare il grafico radar.
                </p>
              </div>
              <p class="generator-compare__empty" id="generator-compare-empty">
                Nessuna specie in confronto. Usa il pulsante ðŸ“Š sulle card per aggiungerle.
              </p>
              <ul class="generator-compare__list" id="generator-compare-list" aria-live="polite"></ul>
              <div class="generator-compare__chart" id="generator-compare-chart" hidden>
                <canvas id="generator-compare-canvas" aria-describedby="generator-compare-title"></canvas>
                <p class="generator-compare__fallback" id="generator-compare-fallback" hidden>
                  Impossibile caricare il grafico radar. Controlla la connessione o la console per
                  ulteriori dettagli.
                </p>
              </div>
            </section>
          </section>
        </article>
        </section>

        <section class="section" id="generator-traits" data-panel="traits">
          <div class="section__header">
            <h2>Pacchetti di tratti ambientali</h2>
            <p>
              Anteprima delle tavolozze di tratti per biomi estremi, reti connesse e cluster
              avanzati da usare come riferimento durante la generazione.
            </p>
          </div>
          <div id="trait-grid" class="grid grid--cards" aria-live="polite"></div>
        </section>

        <section class="section" id="generator-biomes" data-panel="biomes">
          <div class="section__header">
            <h2>Biomi selezionati</h2>
            <p>Ogni scheda mostra i link utili al YAML originale, foodweb e report HTML.</p>
          </div>
          <div class="card-shelf" data-collection="biomes">
            <div
              id="biome-grid"
              class="card-shelf__grid generator-collection"
              role="list"
              aria-live="polite"
            ></div>
          </div>
        </section>

        <section class="section" id="generator-seeds" data-panel="seeds">
          <div class="section__header">
            <h2>Encounter seed generati</h2>
            <p>Il budget di minaccia viene calcolato in base al tier delle specie estratte.</p>
          </div>
          <div class="card-shelf card-shelf--compact" data-collection="seeds">
            <div
              id="seed-grid"
              class="card-shelf__grid generator-collection generator-collection--compact"
              role="list"
              aria-live="polite"
            ></div>
          </div>
        </section>
      </div>

      <aside
        class="layout__rail layout__rail--meta"
        aria-label="Contesto della sezione"
        data-anchor-beside
      >
        <div class="codex-breadcrumb">
          <p class="codex-breadcrumb__label">Sezione attuale</p>
          <p class="codex-breadcrumb__trail" data-anchor-breadcrumb aria-live="polite">
            Parametri
          </p>
        </div>
        <div class="codex-minimap" data-anchor-minimap>
          <p class="codex-minimap__title">Minimappa</p>
        </div>
        <section class="generator-kpi" aria-labelledby="generator-kpi-title">
          <h3 class="generator-summary__subtitle" id="generator-kpi-title">KPI sessione</h3>
          <dl class="generator-summary__metrics generator-kpi__metrics">
            <div class="generator-summary__metric">
              <dt class="generator-summary__label">Tempo medio roll</dt>
              <dd class="generator-summary__value" data-kpi="avg-roll">â€”</dd>
            </div>
            <div class="generator-summary__metric">
              <dt class="generator-summary__label">Reroll eseguiti</dt>
              <dd class="generator-summary__value" data-kpi="reroll-count">0</dd>
            </div>
            <div class="generator-summary__metric">
              <dt class="generator-summary__label">Specie uniche</dt>
              <dd class="generator-summary__value" data-kpi="unique-species">0</dd>
            </div>
          </dl>
        </section>
      </aside>
    </main>

    <div class="codex-overlay" data-codex-overlay hidden aria-hidden="true">
      <div class="codex-overlay__inner" role="dialog" aria-modal="true" aria-label="Codex mode">
        <header class="codex-overlay__header">
          <p
            class="codex-overlay__breadcrumb"
            data-anchor-breadcrumb
            data-breadcrumb-mode="overlay"
            aria-live="polite"
          >
            Parametri
          </p>
          <button
            type="button"
            class="button button--ghost codex-overlay__close"
            data-codex-close
          >
            Chiudi Codex
          </button>
        </header>
        <div class="codex-overlay__body">
          <p class="codex-overlay__subtitle">Naviga tra le sezioni e ottieni una panoramica rapida.</p>
          <nav
            class="codex-overlay__map"
            aria-label="Minimappa Codex"
            data-anchor-minimap
            data-minimap-mode="overlay"
          ></nav>
        </div>
      </div>
    </div>
  </body>
</html>
