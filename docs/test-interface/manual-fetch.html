<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Evo-Tactics · Workspace Fetching Manuale</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="vendor/js-yaml.min.js"></script>
    <script defer src="vendor/jszip.min.js"></script>
    <script defer src="app.js"></script>
  </head>
  <body data-page="manual-fetch">
    <header class="site-hero manual-hero">
      <div class="hero-content">
        <p class="hero-kicker">Mission Control · Evo-Tactics</p>
        <h1>Workspace Fetching Manuale</h1>
        <p class="tagline">
          Analizza snapshot esterni, archivi compressi, wiki o canvas condivisi e sincronizza i dataset pronti con la dashboard principale.
          Qui trovi opzioni avanzate, checklist operative e spazio per gli appunti di ricerca.
        </p>
        <div class="hero-actions">
          <a class="pill-link" href="index.html">Torna alla dashboard</a>
          <a class="pill-link" href="auto-fetch.html">Fetch automatico</a>
          <a class="pill-link" href="../ideas/index.html">Idea Engine</a>
          <a class="pill-link" href="../Canvas" target="_blank" rel="noopener">Canvas &amp; wiki</a>
        </div>
        <p class="hint">Suggerimento: usa questo workspace per esaminare file caricati manualmente (zip, md, pdf, docx) o URL con dati YAML/JSON.</p>
      </div>
    </header>

    <main>
      <section class="panel manual-overview">
        <div class="panel-header">
          <h2>Riepilogo sincronizzazioni</h2>
          <p class="muted">Monitoriamo qui l'ultima applicazione sulla dashboard e gli slot in attesa di essere consumati.</p>
        </div>
        <div class="manual-overview-grid">
          <article class="card manual-status">
            <h3>Ultimo applicato</h3>
            <p id="manual-sync-status" class="status">Nessuna sincronizzazione ancora registrata.</p>
            <dl id="manual-sync-history" class="metadata-grid"></dl>
          </article>
          <article class="card manual-pending">
            <h3>Caricamenti in coda</h3>
            <p class="muted">Quando attivi la sincronizzazione automatica, il payload viene salvato qui e consumato alla prossima apertura della dashboard.</p>
            <div id="manual-pending-summary" class="manual-pending-summary muted">Nessun payload in coda.</div>
          </article>
        </div>
      </section>

      <section class="panel manual-workbench">
        <div class="manual-layout">
          <article class="card manual-form">
            <h3>Analizza sorgente manuale</h3>
            <p class="muted">
              Inserisci un URL oppure trascina un file (JSON, YAML, ZIP, Markdown, wiki salvate, PDF, DOCX). Il workspace costruirà anteprime e suggerimenti per l'integrazione.
            </p>
            <form id="fetch-form" class="fetch-form">
              <label for="fetch-url">Sorgente dati</label>
              <input
                id="fetch-url"
                name="fetch-url"
                type="url"
                placeholder="https://example.com/packs.yaml"
                autocomplete="off"
              />
              <label for="fetch-file">Oppure carica un file</label>
              <input
                id="fetch-file"
                name="fetch-file"
                type="file"
                accept=".json,.yaml,.yml,.zip,.md,.markdown,.txt,.html,.htm,.docx,.doc,.pdf"
              />
              <div class="control-actions">
                <button type="submit">Elabora sorgente</button>
              </div>
            </form>
            <p id="fetch-status" class="status" data-status="idle">In attesa di input…</p>
            <div id="fetch-preview" class="preview">
              <p id="fetch-preview-empty" class="preview-empty" aria-live="polite">(nessun contenuto)</p>
              <div id="fetch-preview-body" class="preview-body" hidden>
                <p id="fetch-preview-summary" class="preview-summary" hidden></p>
                <ul id="fetch-preview-warnings" class="preview-warnings" hidden></ul>
                <div id="fetch-preview-tabs" class="preview-tabs" role="tablist" aria-label="Sezioni dataset"></div>
                <pre id="fetch-preview-content" class="preview-content" aria-live="polite"></pre>
                <div id="fetch-preview-pagination" class="preview-pagination"></div>
              </div>
            </div>
          </article>

          <article class="card manual-options">
            <h3>Parametri di indagine</h3>
            <p class="muted">Scegli come trattare la sorgente e come sincronizzarla con la dashboard principale.</p>
            <div class="manual-options-group">
              <label class="toggle">
                <input type="checkbox" id="manual-option-archive" checked />
                <span>Analizza archivi e allegati (ZIP, DOCX, Canvas)</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="manual-option-diagnostics" checked />
                <span>Esegui diagnostica dataset dopo l'analisi</span>
              </label>
              <label class="toggle">
                <input type="checkbox" id="manual-option-auto-apply" checked />
                <span>Sincronizza automaticamente con la dashboard</span>
              </label>
              <label class="toggle sub-option">
                <input type="checkbox" id="manual-option-auto-tests" checked />
                <span>Lancia i test automatici al prossimo avvio</span>
              </label>
            </div>
            <label class="selector">
              <span>Dataset di destinazione (override)</span>
              <select id="manual-target">
                <option value="">Rilevamento automatico</option>
                <option value="packs">Pacchetti / Forme</option>
                <option value="telemetry">Telemetria VC</option>
                <option value="biomes">Biomi</option>
                <option value="mating">Compatibilità MBTI</option>
                <option value="species">Specie &amp; catalogo</option>
              </select>
            </label>
            <div class="manual-metadata" id="manual-fetch-metadata">
              <p class="muted">Nessuna analisi ancora eseguita.</p>
            </div>
            <div class="manual-diagnostics" id="manual-diagnostics">
              <p class="muted">La diagnostica comparirà qui dopo il prossimo fetch.</p>
            </div>
          </article>
        </div>
      </section>

      <section class="panel manual-research">
        <div class="manual-research-grid">
          <article class="card">
            <h3>Appunti di ricerca</h3>
            <p class="muted">Annota link utili, job da integrare o decisioni prese durante la selezione dei file. Il testo viene salvato automaticamente nel browser.</p>
            <textarea id="manual-research-notes" rows="10" placeholder="Appunti rapidi…"></textarea>
          </article>
          <article class="card">
            <h3>Checklist operativa</h3>
            <p class="muted">Usa le spunte per ricordare i passi chiave quando valuti nuove fonti.</p>
            <ul class="manual-checklist">
              <li>
                <label>
                  <input type="checkbox" data-manual-flag="verify-credits" />
                  <span>Verifica fonti e attribuzioni (wiki, canvas condivisi)</span>
                </label>
              </li>
              <li>
                <label>
                  <input type="checkbox" data-manual-flag="align-scope" />
                  <span>Confronta i contenuti con il focus dell'attuale sprint di ricerca</span>
                </label>
              </li>
              <li>
                <label>
                  <input type="checkbox" data-manual-flag="cross-test" />
                  <span>Prepara i test rapidi (script CLI o sezione Playtest) dopo l'import</span>
                </label>
              </li>
              <li>
                <label>
                  <input type="checkbox" data-manual-flag="archive" />
                  <span>Archivia i file originali nel drive di progetto</span>
                </label>
              </li>
            </ul>
          </article>
          <article class="card">
            <h3>Script CLI di indagine</h3>
            <p class="muted">
              Per analisi approfondite offline usa <code>scripts/investigate_sources.py</code>. Puoi passare file multipli (JSON/MD/ZIP/PDF) e ottenere report sintetici prima di importare i dati nel gioco.
            </p>
            <pre class="code-snippet"><code>python scripts/investigate_sources.py data/sorgenti.zip --summary --extract</code></pre>
            <p class="muted">Suggerimento: combina lo script con questo workspace per creare una pipeline di verifica rapida.</p>
          </article>
        </div>
      </section>
    </main>
  </body>
</html>
