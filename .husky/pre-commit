#!/usr/bin/env sh

set -e

branch=$(git rev-parse --abbrev-ref HEAD)

if [ "$branch" = "main" ]; then
  echo "[pre-commit] Commit on 'main' is blocked. Please use a patch branch (01Aâ€“03B) or 'work'." >&2
  exit 1
fi

git diff --cached --name-only --diff-filter=ACMR -z \
  | xargs -0 npx prettier --check --ignore-unknown

node tools/check_backups_binary.js
